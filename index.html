<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Atm√≥sfera - 1¬∫ ESO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .theory-content { white-space: pre-line; line-height: 1.8; }
        .theory-content strong { color: #1e40af; font-weight: 700; }
        .block-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 1rem 1rem 0 0;
        }
        .theory-image {
            width: 100%;
            max-width: 600px;
            height: 300px;
            object-fit: cover;
            border-radius: 1rem;
            margin: 20px auto;
            display: block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .level-card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 0.75rem 0.75rem 0 0;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
        const blocks = {
            1: { 
                title: "ORIGEN DE LA ATM√ìSFERA", 
                icon: "üåã", 
                color: "from-orange-500 to-red-600",
                image: "imagenes/volcan-primitivo.jpg"
            },
            2: { 
                title: "COMPOSICI√ìN DEL AIRE", 
                icon: "üí®", 
                color: "from-blue-400 to-cyan-500",
                image: "imagenes/composicion-aire.png"
            },
            3: { 
                title: "CAPAS DE LA ATM√ìSFERA", 
                icon: "üåç", 
                color: "from-indigo-500 to-purple-600",
                image: "imagenes/capas-atmosfera.jpg"
            },
            4: { 
                title: "FUNCIONES DE LA ATM√ìSFERA", 
                icon: "üõ°Ô∏è", 
                color: "from-green-500 to-emerald-600",
                image: "imagenes/efecto-invernadero.jpg"
            },
            5: { 
                title: "CONTAMINACI√ìN ATMOSF√âRICA", 
                icon: "üè≠", 
                color: "from-gray-600 to-gray-800",
                image: "imagenes/contaminacion-ciudad.jpg"
            }
        };

        const levelNames = {
            "1": { 
                "1.1": "Primera etapa - Origen volc√°nico",
                "1.2": "Segunda etapa - Formaci√≥n oc√©anos",
                "1.3": "Tercera etapa - Aparici√≥n ox√≠geno",
                "1.4": "Cuarta etapa - Atm√≥sfera actual"
            },
            "2": { 
                "2.1": "Nitr√≥geno (78%)",
                "2.2": "Ox√≠geno (21%)",
                "2.3": "Otros gases",
                "2.4": "Aire y part√≠culas"
            },
            "3": { 
                "3.1": "Troposfera",
                "3.2": "Estratosfera",
                "3.3": "Mesosfera",
                "3.4": "Termosfera y Exosfera"
            },
            "4": { 
                "4.1": "Efecto invernadero",
                "4.2": "Capa de ozono",
                "4.3": "Protecci√≥n meteoritos",
                "4.4": "Fen√≥menos meteorol√≥gicos"
            },
            "5": { 
                "5.1": "Tipos de contaminantes",
                "5.2": "Lluvia √°cida",
                "5.3": "Calentamiento global",
                "5.4": "Agujero de ozono"
            }
        };

        const levelImages = {
            "1-1.1": "imagenes/volcan-primitivo.jpg",
            "1-1.2": "imagenes/oceano-lluvia.jpg",
            "1-1.3": "imagenes/cianobacterias.jpg",
            "1-1.4": "imagenes/atmosfera-actual.jpg",
            "2-2.1": "imagenes/composicion-aire.png",
            "2-2.2": "imagenes/composicion-aire.png",
            "2-2.3": "imagenes/composicion-aire.png",
            "2-2.4": "imagenes/particulas-aire.jpg",
            "3-3.1": "imagenes/troposfera.jpg",
            "3-3.2": "imagenes/estratosfera-ozono.jpg",
            "3-3.3": "imagenes/mesosfera-meteoro.jpg",
            "3-3.4": "imagenes/termosfera-aurora.jpg",
            "4-4.1": "imagenes/efecto-invernadero.jpg",
            "4-4.2": "imagenes/estratosfera-ozono.jpg",
            "4-4.3": "imagenes/proteccion-meteoritos.jpg",
            "4-4.4": "imagenes/ciclo-agua.jpg",
            "5-5.1": "imagenes/contaminacion-ciudad.jpg",
            "5-5.2": "imagenes/contaminacion-ciudad.jpg",
            "5-5.3": "imagenes/contaminacion-ciudad.jpg",
            "5-5.4": "imagenes/agujero-ozono.jpg"
        };

        const theoryContent = {
            "1-1.1": {
                title: "PRIMERA ETAPA - Origen Volc√°nico",
                content: `**Hace 4.400 millones de a√±os** se origin√≥ la atm√≥sfera terrestre.

**¬øC√≥mo se form√≥?**
- Los gases escaparon del interior de la Tierra (masa de roca fundida)
- La Tierra se enfri√≥ y se liberaron gases volc√°nicos
- Gases principales: di√≥xido de carbono (CO‚ÇÇ), mon√≥xido de carbono (CO), vapor de agua (H‚ÇÇO)

**Caracter√≠stica importante:**
Esta atm√≥sfera primitiva NO ten√≠a ox√≠geno, por lo que era irrespirable para los seres vivos actuales.`
            },
            "1-1.2": {
                title: "SEGUNDA ETAPA - Formaci√≥n de Oc√©anos",
                content: `**El vapor de agua se condensa**

Cuando la Tierra se enfri√≥ lo suficiente:
- El vapor de agua comenz√≥ a condensarse
- Empez√≥ a precipitar en forma de lluvias torrenciales
- Estas lluvias duraron millones de a√±os
- Se formaron los mares y oc√©anos (la hidrosfera)

**Resultado:** Gran parte del CO‚ÇÇ se disolvi√≥ en el agua de los oc√©anos.`
            },
            "1-1.3": {
                title: "TERCERA ETAPA - Aparici√≥n del Ox√≠geno",
                content: `**Hace 3.500 millones de a√±os**

Aparecieron las primeras **cianobacterias** (bacterias fotosint√©ticas):
- Realizaban la fotos√≠ntesis
- Liberaban ox√≠geno (O‚ÇÇ) a la atm√≥sfera
- Gradualmente el ox√≠geno se fue acumulando

**Con la aparici√≥n de plantas y algas**, este proceso se aceler√≥ enormemente.

**Importancia:** Por primera vez hab√≠a ox√≠geno en la atm√≥sfera.`
            },
            "1-1.4": {
                title: "CUARTA ETAPA - Atm√≥sfera Actual",
                content: `**Finalmente pudieron aparecer los animales**

Con suficiente ox√≠geno en la atm√≥sfera:
- Los animales pudieron respirar
- Desde entonces la atm√≥sfera ha mantenido una composici√≥n pr√°cticamente constante

**Composici√≥n actual:**
- Nitr√≥geno (N‚ÇÇ): 78%
- Ox√≠geno (O‚ÇÇ): 21%
- Otros gases: 1% (CO‚ÇÇ, arg√≥n, vapor de agua, ozono)`
            },
            "2-2.1": {
                title: "NITR√ìGENO (N‚ÇÇ) - 78%",
                content: `**El gas m√°s abundante de la atm√≥sfera**

**Caracter√≠sticas:**
- Representa el 78% del aire
- Es un gas inerte (poco reactivo)
- S√≠mbolo: N‚ÇÇ

**Funciones:**
- Las plantas lo necesitan para formar prote√≠nas
- Lo obtienen del suelo en forma de nitratos
- Es esencial para la vida aunque no lo respiramos directamente`
            },
            "2-2.2": {
                title: "OX√çGENO (O‚ÇÇ) - 21%",
                content: `**El gas esencial para la respiraci√≥n**

**Caracter√≠sticas:**
- Representa el 21% del aire
- Es muy reactivo
- S√≠mbolo: O‚ÇÇ

**Funciones:**
- Necesario para la respiraci√≥n de animales
- Permite las combustiones
- Se produce por la fotos√≠ntesis de plantas y algas

**Importancia:** Sin ox√≠geno no ser√≠a posible la vida animal en la Tierra.`
            },
            "2-2.3": {
                title: "OTROS GASES - 1%",
                content: `**Gases minoritarios pero importantes**

**Arg√≥n (0,9%)**
- Gas noble, inerte

**Di√≥xido de carbono - CO‚ÇÇ (0,04%)**
- Usado por las plantas en la fotos√≠ntesis
- Gas de efecto invernadero

**Vapor de agua (cantidad variable)**
- Forma las nubes al condensarse
- Importante para el ciclo del agua

**Ozono (O‚ÇÉ)**
- En la estratosfera
- Filtra rayos ultravioleta`
            },
            "2-2.4": {
                title: "AIRE Y PART√çCULAS EN SUSPENSI√ìN",
                content: `**¬øQu√© es el aire?**
El aire es la mezcla de gases que respiramos (N‚ÇÇ + O‚ÇÇ + otros gases).

**Part√≠culas en suspensi√≥n:**
- Polvo
- Polen
- Humo
- Cenizas volc√°nicas
- Cristales de sal marina

**Caracter√≠sticas del aire:**
- Tiene masa y peso
- Es transparente e inodoro
- Puede moverse (viento)

**La atm√≥sfera NO es homog√©nea:** tiene distintas capas con diferentes caracter√≠sticas.`
            },
            "3-3.1": {
                title: "TROPOSFERA",
                content: `**La capa m√°s cercana a la Tierra**

**Caracter√≠sticas:**
- Altura: Desde la superficie hasta 12 km
- Temperatura: Disminuye con la altura (hasta -70¬∞C en el l√≠mite superior)
- Contiene el 80% de los gases de la atm√≥sfera

**Funciones:**
- Aqu√≠ ocurren todos los fen√≥menos meteorol√≥gicos: lluvias, tormentas, tornados
- Es crucial para la vida en la Tierra
- √önica capa en contacto directo con la superficie

**Curiosidades:**
- Los aviones comerciales vuelan en la parte alta de la troposfera para evitar turbulencias`
            },
            "3-3.2": {
                title: "ESTRATOSFERA",
                content: `**La capa del ozono**

**Caracter√≠sticas:**
- Altura: Entre 12 y 50 km
- Temperatura: Aumenta con la altitud (hasta 0¬∞C)
- El aumento se debe a la absorci√≥n de radiaci√≥n ultravioleta

**Funciones:**
- Alberga la **capa de ozono**
- Bloquea los da√±inos rayos ultravioleta del Sol

**Curiosidades:**
- Los aviones esp√≠a U-2 vuelan aqu√≠
- Los saltos estratosf√©ricos en paraca√≠das ocurren en esta capa
- Aqu√≠ se encuentran los globos meteorol√≥gicos`
            },
            "3-3.3": {
                title: "MESOSFERA",
                content: `**La capa m√°s fr√≠a**

**Caracter√≠sticas:**
- Altura: Entre 50 y 80 km
- Temperatura: La m√°s fr√≠a de la atm√≥sfera (hasta -100¬∞C)

**Funciones:**
- Act√∫a como escudo protector
- Desintegra la mayor√≠a de los meteoritos
- Da lugar a las estrellas fugaces

**Curiosidades:**
- Es la capa menos estudiada
- No hay globos ni aviones que puedan llegar
- Conocida como el "cementerio de meteoritos"`
            },
            "3-3.4": {
                title: "TERMOSFERA Y EXOSFERA",
                content: `**TERMOSFERA (80-500 km)**

**Caracter√≠sticas:**
- Temperaturas extremadamente altas (>1.500¬∞C)
- Calentamiento por rayos solares
- Se producen las auroras boreales

**Funciones:**
- Orbitan la mayor√≠a de sat√©lites artificiales
- Incluye la Estaci√≥n Espacial Internacional

---

**EXOSFERA (600-10.000 km)**

**Caracter√≠sticas:**
- La capa m√°s externa
- Composici√≥n igual al espacio interplanetario

**Funciones:**
- Zona de transici√≥n atm√≥sfera-espacio exterior
- Sat√©lites geoestacionarios`
            },
            "4-4.1": {
                title: "EFECTO INVERNADERO",
                content: `**Un fen√≥meno natural necesario**

**¬øQu√© es?**
Algunos gases (CO‚ÇÇ, vapor de agua) retienen el calor del Sol, manteniendo la Tierra caliente.

**¬øPor qu√© es importante?**
- Sin efecto invernadero: -18¬∞C (vida imposible)
- Con efecto invernadero: +15¬∞C (temperatura media actual)

**El problema:**
El exceso de CO‚ÇÇ por actividades humanas aumenta demasiado la temperatura (calentamiento global).

**Causas del exceso:**
- Quema de combustibles f√≥siles (petr√≥leo, carb√≥n, gas)
- Deforestaci√≥n
- Industrias contaminantes`
            },
            "4-4.2": {
                title: "CAPA DE OZONO",
                content: `**El escudo protector**

**¬øQu√© es?**
Capa de ozono (O‚ÇÉ) en la estratosfera que filtra los rayos ultravioleta del Sol.

**Funciones:**
- Bloquea el 99% de los rayos UV
- Protege a los seres vivos

**Da√±os que causan los rayos UV:**
- C√°ncer de piel
- Quemaduras solares
- Da√±o ocular (cataratas)
- Da√±o al ADN

**Amenaza:**
Los CFC (clorofluorocarbonos) de aerosoles y refrigeradores antiguos destruyen el ozono.

**Agujero de ozono:** Principalmente sobre la Ant√°rtida.`
            },
            "4-4.3": {
                title: "PROTECCI√ìN CONTRA METEORITOS",
                content: `**La atm√≥sfera como escudo**

**¬øC√≥mo protege?**
- Los meteoritos entran a gran velocidad
- La fricci√≥n con el aire los calienta
- Se desintegran en la mesosfera
- Los vemos como "estrellas fugaces"

**Resultado:**
La mayor√≠a de meteoritos NO llegan al suelo.

**Sin atm√≥sfera:**
Como en la Luna, todos los meteoritos impactar√≠an la superficie creando cr√°teres.

**Importancia:**
Protege la vida en la Tierra de impactos constantes desde el espacio.`
            },
            "4-4.4": {
                title: "FEN√ìMENOS METEOROL√ìGICOS",
                content: `**La atm√≥sfera regula el clima**

**Funciones:**
- **Ciclo del agua:** Evaporaci√≥n ‚Üí nubes ‚Üí lluvia
- **Viento:** Movimiento del aire
- **Tormentas:** Descargas el√©ctricas
- **Temperatura:** Regula el calor

**Importancia del agua:**
- Las lluvias traen agua dulce
- Necesaria para la vida
- Rellena r√≠os, lagos y acu√≠feros

**Fen√≥menos:**
- Lluvia, nieve, granizo
- Tornados y huracanes
- Arco√≠ris
- Rel√°mpagos`
            },
            "5-5.1": {
                title: "TIPOS DE CONTAMINANTES",
                content: `**¬øQu√© es la contaminaci√≥n atmosf√©rica?**
Presencia de sustancias o energ√≠a que causan efectos nocivos para los seres vivos.

**Principales contaminantes:**

**1. Gases:**
- CO‚ÇÇ (di√≥xido de carbono)
- SO‚ÇÇ (√≥xido de azufre)
- NO‚Çì (√≥xidos de nitr√≥geno)
- CFCs (clorofluorocarbonos)

**2. Part√≠culas s√≥lidas:**
- Humo
- Holl√≠n
- Polvo industrial

**3. Ruido:**
- Contaminaci√≥n ac√∫stica`
            },
            "5-5.2": {
                title: "LLUVIA √ÅCIDA",
                content: `**¬øQu√© es?**
Lluvia con pH bajo (√°cido) causada por contaminantes.

**Causas:**
- SO‚ÇÇ y NO‚Çì de f√°bricas y veh√≠culos
- Se combinan con agua en la atm√≥sfera
- Forman √°cido sulf√∫rico y √°cido n√≠trico

**Efectos:**
- Da√±a bosques y cultivos
- Acidifica lagos y r√≠os (mata peces)
- Corroe edificios y estatuas
- Da√±a la salud humana

**Soluci√≥n:**
Reducir emisiones de SO‚ÇÇ y NO‚Çì usando filtros en industrias y veh√≠culos menos contaminantes.`
            },
            "5-5.3": {
                title: "CALENTAMIENTO GLOBAL",
                content: `**Aumento de la temperatura media del planeta**

**Causa:**
Exceso de gases de efecto invernadero (principalmente CO‚ÇÇ) por actividades humanas.

**Consecuencias:**
- Deshielo de polos y glaciares
- Aumento del nivel del mar
- Cambios en el clima
- Sequ√≠as e inundaciones
- Extinci√≥n de especies

**Soluciones:**
- Energ√≠as renovables (solar, e√≥lica)
- Reducir uso de combustibles f√≥siles
- Reforestaci√≥n
- Transporte sostenible`
            },
            "5-5.4": {
                title: "AGUJERO DE OZONO",
                content: `**Reducci√≥n de la capa de ozono**

**Causa:**
Los CFCs (en aerosoles, refrigeradores antiguos) destruyen las mol√©culas de ozono.

**Ubicaci√≥n:**
Principalmente sobre la Ant√°rtida (polo sur).

**Consecuencias:**
- M√°s rayos UV llegan a la Tierra
- Aumento de c√°ncer de piel
- Da√±o a ecosistemas

**Soluci√≥n:**
- Protocolo de Montreal (1987)
- Prohibici√≥n de CFCs
- Uso de gases alternativos

**Buenas noticias:**
El agujero se est√° recuperando lentamente.`
            }
        };

        const exerciseData = {
            "1-1.1": [
                { q: "¬øHace cu√°ntos millones de a√±os se origin√≥ la atm√≥sfera?", a: "4400", sol: "4.400 millones de a√±os" },
                { q: "¬øDe d√≥nde salieron los gases?", a: "interior tierra volcanes", sol: "Del interior de la Tierra (volcanes)" },
                { q: "¬øHab√≠a ox√≠geno en la atm√≥sfera primitiva? (s√≠/no)", a: "no", sol: "NO hab√≠a ox√≠geno" },
                { q: "¬øQu√© gas abundaba?", a: "dioxido carbono co2", sol: "Di√≥xido de carbono (CO‚ÇÇ)" }
            ],
            "1-1.2": [
                { q: "¬øQu√© ocurri√≥ cuando la Tierra se enfri√≥?", a: "vapor agua condenso lluvia", sol: "El vapor de agua se condens√≥ y llovi√≥" },
                { q: "¬øQu√© se form√≥ con las lluvias?", a: "oceanos mares hidrosfera", sol: "Los oc√©anos y mares (hidrosfera)" },
                { q: "¬øD√≥nde se disolvi√≥ parte del CO‚ÇÇ?", a: "agua oceanos mares", sol: "En el agua de los oc√©anos" }
            ],
            "1-1.3": [
                { q: "¬øHace cu√°ntos millones de a√±os aparecieron las primeras bacterias fotosint√©ticas?", a: "3500", sol: "3.500 millones de a√±os" },
                { q: "¬øC√≥mo se llaman esas bacterias?", a: "cianobacterias", sol: "Cianobacterias" },
                { q: "¬øQu√© gas produc√≠an?", a: "oxigeno o2", sol: "Ox√≠geno (O‚ÇÇ)" },
                { q: "¬øQu√© seres vivos tambi√©n producen ox√≠geno?", a: "plantas algas", sol: "Plantas y algas" }
            ],
            "1-1.4": [
                { q: "¬øQu√© porcentaje de nitr√≥geno tiene el aire actual?", a: "78", sol: "78%" },
                { q: "¬øQu√© porcentaje de ox√≠geno?", a: "21", sol: "21%" },
                { q: "¬øQu√© porcentaje representan los dem√°s gases?", a: "1", sol: "1%" },
                { q: "¬øPor qu√© pudieron aparecer los animales?", a: "oxigeno respirar", sol: "Porque hab√≠a ox√≠geno para respirar" }
            ],
            "2-2.1": [
                { q: "¬øQu√© porcentaje del aire es nitr√≥geno?", a: "78", sol: "78%" },
                { q: "¬øCu√°l es su s√≠mbolo qu√≠mico?", a: "n2", sol: "N‚ÇÇ" },
                { q: "¬øEs reactivo o inerte?", a: "inerte", sol: "Inerte (poco reactivo)" },
                { q: "¬øPara qu√© lo necesitan las plantas?", a: "proteinas", sol: "Para formar prote√≠nas" }
            ],
            "2-2.2": [
                { q: "¬øQu√© porcentaje del aire es ox√≠geno?", a: "21", sol: "21%" },
                { q: "¬øCu√°l es su s√≠mbolo qu√≠mico?", a: "o2", sol: "O‚ÇÇ" },
                { q: "¬øPara qu√© lo usamos?", a: "respirar", sol: "Para respirar" },
                { q: "¬øQu√© proceso lo produce?", a: "fotosintesis", sol: "La fotos√≠ntesis" }
            ],
            "2-2.3": [
                { q: "¬øQu√© gas noble hay en el aire?", a: "argon", sol: "Arg√≥n" },
                { q: "¬øQu√© porcentaje de CO‚ÇÇ hay?", a: "0.04", sol: "0,04%" },
                { q: "¬øPara qu√© usan las plantas el CO‚ÇÇ?", a: "fotosintesis", sol: "Para la fotos√≠ntesis" },
                { q: "¬øQu√© forma el vapor de agua al condensarse?", a: "nubes", sol: "Las nubes" }
            ],
            "2-2.4": [
                { q: "¬øC√≥mo se llama la mezcla de gases que respiramos?", a: "aire", sol: "Aire" },
                { q: "¬øEl aire tiene masa? (s√≠/no)", a: "si", sol: "S√≠" },
                { q: "¬øLa atm√≥sfera es homog√©nea? (s√≠/no)", a: "no", sol: "NO, tiene distintas capas" },
                { q: "Nombra 2 part√≠culas en suspensi√≥n", a: "polvo polen humo", sol: "Polvo, polen, humo, cenizas..." }
            ],
            "3-3.1": [
                { q: "¬øHasta qu√© altura llega la troposfera?", a: "12", sol: "12 km" },
                { q: "¬øQu√© porcentaje del aire contiene?", a: "80", sol: "80%" },
                { q: "¬øLa temperatura aumenta o disminuye con la altura?", a: "disminuye", sol: "Disminuye" },
                { q: "¬øQu√© ocurre en esta capa?", a: "fenomenos meteorologicos lluvia", sol: "Fen√≥menos meteorol√≥gicos (lluvia, tormentas...)" },
                { q: "¬øD√≥nde vuelan los aviones comerciales?", a: "troposfera", sol: "En la troposfera" }
            ],
            "3-3.2": [
                { q: "¬øEntre qu√© alturas est√° la estratosfera?", a: "12 50", sol: "Entre 12 y 50 km" },
                { q: "¬øLa temperatura aumenta o disminuye?", a: "aumenta", sol: "Aumenta con la altura" },
                { q: "¬øQu√© capa importante hay aqu√≠?", a: "ozono", sol: "La capa de ozono" },
                { q: "¬øQu√© radiaci√≥n bloquea el ozono?", a: "ultravioleta uv", sol: "Radiaci√≥n ultravioleta (UV)" },
                { q: "¬øHasta qu√© temperatura puede llegar?", a: "0", sol: "0¬∞C" }
            ],
            "3-3.3": [
                { q: "¬øEntre qu√© alturas est√° la mesosfera?", a: "50 80", sol: "Entre 50 y 80 km" },
                { q: "¬øEs la capa m√°s fr√≠a o m√°s caliente?", a: "fria", sol: "La m√°s fr√≠a" },
                { q: "¬øQu√© temperatura m√≠nima alcanza?", a: "-100", sol: "-100¬∞C" },
                { q: "¬øQu√© se desintegra aqu√≠?", a: "meteoritos", sol: "Los meteoritos" },
                { q: "¬øC√≥mo se llaman las 'estrellas fugaces'?", a: "meteoritos", sol: "Meteoritos que se desintegran" }
            ],
            "3-3.4": [
                { q: "¬øEntre qu√© alturas est√° la termosfera?", a: "80 500", sol: "Entre 80 y 500 km" },
                { q: "¬øQu√© temperatura puede alcanzar?", a: "1500", sol: "M√°s de 1.500¬∞C" },
                { q: "¬øQu√© fen√≥meno luminoso ocurre aqu√≠?", a: "auroras boreales", sol: "Auroras boreales" },
                { q: "¬øCu√°l es la capa m√°s externa?", a: "exosfera", sol: "La exosfera" },
                { q: "¬øD√≥nde est√°n los sat√©lites geoestacionarios?", a: "exosfera", sol: "En la exosfera" }
            ],
            "4-4.1": [
                { q: "¬øQu√© gases causan el efecto invernadero?", a: "co2 vapor agua", sol: "CO‚ÇÇ y vapor de agua" },
                { q: "¬øEs necesario el efecto invernadero? (s√≠/no)", a: "si", sol: "S√≠, mantiene la temperatura" },
                { q: "¬øQu√© temperatura habr√≠a sin √©l?", a: "-18", sol: "-18¬∞C" },
                { q: "¬øQu√© causa el exceso de CO‚ÇÇ?", a: "combustibles fosiles", sol: "Quema de combustibles f√≥siles" }
            ],
            "4-4.2": [
                { q: "¬øEn qu√© capa est√° la capa de ozono?", a: "estratosfera", sol: "En la estratosfera" },
                { q: "¬øQu√© radiaci√≥n filtra?", a: "ultravioleta uv", sol: "Rayos ultravioleta (UV)" },
                { q: "Nombra un da√±o que causan los rayos UV", a: "cancer piel quemaduras", sol: "C√°ncer de piel, quemaduras..." },
                { q: "¬øQu√© sustancias da√±an el ozono?", a: "cfc", sol: "Los CFC (clorofluorocarbonos)" }
            ],
            "4-4.3": [
                { q: "¬øEn qu√© capa se desintegran los meteoritos?", a: "mesosfera", sol: "En la mesosfera" },
                { q: "¬øPor qu√© se desintegran?", a: "friccion aire calor", sol: "Por la fricci√≥n con el aire" },
                { q: "¬øC√≥mo los vemos desde la Tierra?", a: "estrellas fugaces", sol: "Como estrellas fugaces" },
                { q: "¬øTodos llegan al suelo? (s√≠/no)", a: "no", sol: "NO, la mayor√≠a se desintegran" }
            ],
            "4-4.4": [
                { q: "¬øD√≥nde ocurren las lluvias y tormentas?", a: "troposfera", sol: "En la troposfera" },
                { q: "Nombra 3 fen√≥menos meteorol√≥gicos", a: "lluvia viento tormenta", sol: "Lluvia, viento, tormenta, nieve..." },
                { q: "¬øPara qu√© es necesaria el agua de lluvia?", a: "vida dulce rios", sol: "Para la vida, r√≠os, lagos..." },
                { q: "¬øQu√© ciclo implica evaporaci√≥n y lluvia?", a: "agua", sol: "El ciclo del agua" }
            ],
            "5-5.1": [
                { q: "¬øQu√© es la contaminaci√≥n atmosf√©rica?", a: "sustancias nocivas", sol: "Presencia de sustancias nocivas" },
                { q: "Nombra 2 gases contaminantes", a: "co2 so2 nox cfc", sol: "CO‚ÇÇ, SO‚ÇÇ, NO‚Çì, CFCs..." },
                { q: "¬øLas part√≠culas s√≥lidas contaminan? (s√≠/no)", a: "si", sol: "S√≠ (humo, holl√≠n, polvo...)" },
                { q: "¬øEl ruido es contaminaci√≥n? (s√≠/no)", a: "si", sol: "S√≠, contaminaci√≥n ac√∫stica" }
            ],
            "5-5.2": [
                { q: "¬øQu√© es la lluvia √°cida?", a: "lluvia acida ph bajo", sol: "Lluvia con pH bajo (√°cida)" },
                { q: "¬øQu√© gases la causan?", a: "so2 nox", sol: "SO‚ÇÇ y NO‚Çì" },
                { q: "¬øDe d√≥nde vienen esos gases?", a: "fabricas vehiculos industria", sol: "F√°bricas y veh√≠culos" },
                { q: "Nombra un efecto de la lluvia √°cida", a: "da√±a bosques rios corroe", sol: "Da√±a bosques, r√≠os, edificios..." }
            ],
            "5-5.3": [
                { q: "¬øQu√© es el calentamiento global?", a: "aumento temperatura", sol: "Aumento de la temperatura del planeta" },
                { q: "¬øQu√© gas lo causa principalmente?", a: "co2", sol: "CO‚ÇÇ (di√≥xido de carbono)" },
                { q: "Nombra una consecuencia", a: "deshielo nivel mar cambio clima", sol: "Deshielo, subida del nivel del mar, cambios clim√°ticos..." },
                { q: "¬øQu√© energ√≠as ayudan a reducirlo?", a: "renovables solar eolica", sol: "Energ√≠as renovables (solar, e√≥lica...)" }
            ],
            "5-5.4": [
                { q: "¬øQu√© es el agujero de ozono?", a: "reduccion ozono", sol: "Reducci√≥n de la capa de ozono" },
                { q: "¬øQu√© sustancias lo causan?", a: "cfc", sol: "Los CFCs" },
                { q: "¬øD√≥nde est√° principalmente?", a: "antartida polo sur", sol: "Sobre la Ant√°rtida" },
                { q: "¬øQu√© acuerdo lo prohibi√≥?", a: "montreal", sol: "Protocolo de Montreal (1987)" },
                { q: "¬øSe est√° recuperando? (s√≠/no)", a: "si", sol: "S√≠, lentamente" }
            ]
        };

        let state = {
            selectedBlock: null,
            selectedLevel: null,
            showTheory: true,
            answers: {},
            showResults: {},
            studentName: localStorage.getItem('studentName') || '',
            showNameModal: !localStorage.getItem('studentName')
        };

        function saveState() {
            localStorage.setItem('studentName', state.studentName);
        }

        function render() {
            const app = document.getElementById('app');
            let html = '';

            if (state.showNameModal && !state.studentName) {
                html += `<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">¬°Bienvenido/a!</h2>
                        <p class="text-gray-600 mb-6">Por favor, introduce tu nombre para comenzar:</p>
                        <input type="text" id="nameInput" placeholder="Tu nombre completo" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none mb-4">
                        <button onclick="setName()" class="w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition font-medium">
                            Comenzar
                        </button>
                    </div>
                </div>`;
            }

            html += `<div class="min-h-screen bg-gradient-to-br from-sky-100 via-blue-50 to-indigo-100 p-4">
                <div class="max-w-7xl mx-auto">
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-2xl p-8 mb-8 text-white relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -mr-32 -mt-32"></div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="bg-white p-4 rounded-xl">
                                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                                </div>
                                <div>
                                    <h1 class="text-4xl font-bold mb-2">La Atm√≥sfera</h1>
                                    <p class="text-blue-100 text-lg">Biolog√≠a y Geolog√≠a - 1¬∫ ESO üåç</p>
                                    ${state.studentName ? `<p class="text-blue-200 text-sm mt-1">üë§ ${state.studentName}</p>` : ''}
                                </div>
                            </div>
                            <div class="flex gap-4 mt-6 flex-wrap">
                                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-lg backdrop-blur">
                                    <span class="font-semibold">üéØ 5 Bloques Tem√°ticos</span>
                                </div>
                                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-lg backdrop-blur">
                                    <span class="font-semibold">üìö 20 Niveles</span>
                                </div>
                                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-lg backdrop-blur">
                                    <span class="font-semibold">üìñ Teor√≠a + Pr√°ctica</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${!state.selectedBlock ? renderBlockSelection() : (!state.selectedLevel ? renderLevelSelection() : (state.showTheory ? renderTheory() : renderExercises()))}
                </div>
            </div>`;

            app.innerHTML = html;
        }

        function renderBlockSelection() {
            return `<div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <span class="text-3xl">üèÜ</span> Selecciona un Bloque Tem√°tico
                </h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${Object.entries(blocks).map(([id, block]) => `
                        <div onclick="selectBlock('${id}')" class="bg-white rounded-2xl shadow-xl cursor-pointer transform transition-all hover:scale-105 overflow-hidden">
                            <img src="${block.image}" alt="${block.title}" class="block-image" onerror="this.style.display='none'">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="text-4xl">${block.icon}</div>
                                    <span class="bg-gradient-to-r ${block.color} text-white px-3 py-1 rounded-full text-sm font-bold">
                                        Bloque ${id}
                                    </span>
                                </div>
                                <h3 class="font-bold text-xl text-gray-800 mb-2">${block.title}</h3>
                                <div class="flex items-center text-blue-600 font-medium">
                                    Comenzar <span class="ml-2">‚Üí</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>`;
        }

        function renderLevelSelection() {
            const block = blocks[state.selectedBlock];
            return `<div>
                <button onclick="backToBlocks()" class="mb-6 px-6 py-3 bg-white rounded-xl hover:bg-gray-50 transition shadow-lg flex items-center gap-2">
                    <span>‚Üê</span> Volver a Bloques
                </button>
                
                <div class="bg-gradient-to-r ${block.color} rounded-2xl shadow-xl p-8 mb-8 text-white">
                    <div class="flex items-center gap-4">
                        <div class="text-5xl">${block.icon}</div>
                        <h2 class="text-3xl font-bold">${block.title}</h2>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    ${Object.entries(levelNames[state.selectedBlock] || {}).map(([levelId, levelName]) => {
                        const levelKey = `${state.selectedBlock}-${levelId}`;
                        const image = levelImages[levelKey];
                        return `
                        <div onclick="selectLevel('${levelId}')" class="bg-white rounded-xl shadow-lg cursor-pointer hover:shadow-2xl transition-all overflow-hidden">
                            <img src="${image}" alt="${levelName}" class="level-card-image" onerror="this.style.display='none'">
                            <div class="p-6">
                                <span class="bg-green-500 text-white px-4 py-1 rounded-full text-sm font-bold">
                                    Nivel ${levelId}
                                </span>
                                <h3 class="font-bold text-xl text-gray-800 mt-3 mb-2">${levelName}</h3>
                                <div class="flex items-center text-blue-600 font-medium">
                                    <span class="mr-2">üìñ</span> Leer teor√≠a
                                </div>
                            </div>
                        </div>
                    `}).join('')}
                </div>
            </div>`;
        }

        function renderTheory() {
            const levelKey = `${state.selectedBlock}-${state.selectedLevel}`;
            const theory = theoryContent[levelKey];
            const image = levelImages[levelKey];
            
            return `<div>
                <div class="flex gap-2 mb-6">
                    <button onclick="backToLevels()" class="px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition">
                        <span>‚Üê</span> Niveles
                    </button>
                    <button onclick="backToBlocks()" class="px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition">
                        <span>üè†</span> Inicio
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
                    <div class="flex items-center gap-3 mb-6">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        <h2 class="text-3xl font-bold text-blue-900">${theory.title}</h2>
                    </div>
                    
                    <img src="${image}" alt="${theory.title}" class="theory-image" onerror="this.style.display='none'">
                    
                    <div class="theory-content text-gray-700 text-lg leading-relaxed mt-6">${theory.content}</div>

                    <button onclick="showExercises()" class="mt-8 w-full px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition font-bold text-lg shadow-lg">
                        ‚úÖ He le√≠do la teor√≠a - Hacer Ejercicios
                    </button>
                </div>
            </div>`;
        }

        function renderExercises() {
            const levelKey = `${state.selectedBlock}-${state.selectedLevel}`;
            const exercises = exerciseData[levelKey] || [];
            
            return `<div>
                <div class="flex gap-2 mb-6 flex-wrap">
                    <button onclick="showTheoryAgain()" class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg shadow hover:bg-blue-200 transition">
                        <span class="mr-2">üìñ</span> Ver Teor√≠a
                    </button>
                    <button onclick="backToLevels()" class="px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition">
                        <span>‚Üê</span> Niveles
                    </button>
                    <button onclick="backToBlocks()" class="px-4 py-2 bg-white rounded-lg shadow hover:bg-gray-50 transition">
                        <span>üè†</span> Inicio
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                    <h2 class="text-2xl font-bold text-indigo-900">
                        Ejercicios - Nivel ${state.selectedLevel}: ${levelNames[state.selectedBlock]?.[state.selectedLevel]}
                    </h2>
                    <p class="text-gray-600 mt-2">Responde las preguntas sobre la teor√≠a que acabas de leer</p>
                </div>

                <div class="space-y-6">
                    ${exercises.map((ex, idx) => {
                        const key = `${levelKey}-${idx}`;
                        const result = state.showResults[key];
                        return `
                            <div class="bg-white border-2 rounded-xl p-6">
                                <div class="flex items-start gap-4">
                                    <span class="bg-indigo-100 text-indigo-800 px-4 py-2 rounded-full font-bold">
                                        #${idx + 1}
                                    </span>
                                    <div class="flex-1">
                                        <div class="text-xl font-medium mb-4">${ex.q}</div>
                                        <div class="flex gap-2">
                                            <input
                                                type="text"
                                                id="answer-${key}"
                                                value="${state.answers[key] || ''}"
                                                oninput="updateAnswer('${key}', this.value)"
                                                placeholder="Tu respuesta"
                                                class="flex-1 px-4 py-3 border-2 rounded-lg focus:border-indigo-500 outline-none"
                                            />
                                            <button onclick="checkAnswer('${key}', '${ex.a}')" class="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
                                                Comprobar
                                            </button>
                                        </div>

                                        ${result !== undefined ? `
                                            <div class="mt-4 p-4 rounded-lg ${result ? 'bg-green-50 border-2 border-green-300' : 'bg-red-50 border-2 border-red-300'}">
                                                <div class="flex items-center gap-2">
                                                    ${result ? `
                                                        <span class="text-2xl">‚úÖ</span>
                                                        <span class="font-bold text-green-800">¬°Correcto! üéâ</span>
                                                    ` : `
                                                        <span class="text-2xl">‚ùå</span>
                                                        <span class="font-bold text-red-800">Incorrecto</span>
                                                    `}
                                                </div>
                                                <div class="text-gray-700 mt-2">
                                                    <strong>Soluci√≥n:</strong> ${ex.sol}
                                                </div>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>`;
        }

        function setName() {
            const input = document.getElementById('nameInput');
            if (input && input.value.trim()) {
                state.studentName = input.value.trim();
                state.showNameModal = false;
                saveState();
                render();
            }
        }

        function selectBlock(id) {
            state.selectedBlock = id;
            state.selectedLevel = null;
            state.showTheory = true;
            render();
        }

        function selectLevel(id) {
            state.selectedLevel = id;
            state.showTheory = true;
            render();
        }

        function backToBlocks() {
            state.selectedBlock = null;
            state.selectedLevel = null;
            render();
        }

        function backToLevels() {
            state.selectedLevel = null;
            render();
        }

        function showExercises() {
            state.showTheory = false;
            render();
        }

        function showTheoryAgain() {
            state.showTheory = true;
            render();
        }

        function updateAnswer(key, value) {
            state.answers[key] = value;
        }

        function checkAnswer(key, correct) {
            const userAnswer = (state.answers[key] || '').trim().toLowerCase().replace(/\s+/g, ' ');
            const correctAnswers = correct.toLowerCase().split(' ');
            const isCorrect = correctAnswers.some(ans => userAnswer.includes(ans.replace(/\s/g, '')));
            
            state.showResults[key] = isCorrect;
            render();
        }

        document.addEventListener('DOMContentLoaded', function() {
            render();
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && document.getElementById('nameInput')) {
                    setName();
                }
            });
        });
    </script>
</body>
</html>