<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Atm√≥sfera 1¬∫ ESO</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-cyan-50 to-sky-100 min-h-screen">
    <div id="app"></div>

    <script>
        const state = {
            currentView: 'blocks', // 'blocks', 'levels', 'content'
            selectedBlock: null,
            selectedLevel: null,
            completedLevels: JSON.parse(localStorage.getItem('atmosfera-progress') || '{}'),
            studentName: localStorage.getItem('atmosfera-student-name') || ''
        };

        const blocks = {
            1: { 
                title: "ORIGEN DE LA ATM√ìSFERA", 
                icon: "üåã", 
                color: "from-orange-500 to-red-500",
                levels: {
                    "1.1": "Primera etapa - Atm√≥sfera primitiva",
                    "1.2": "Segunda etapa - Formaci√≥n oc√©anos",
                    "1.3": "Tercera etapa - Aparici√≥n ox√≠geno",
                    "1.4": "Cuarta etapa - Atm√≥sfera actual"
                }
            },
            2: { 
                title: "COMPOSICI√ìN DEL AIRE", 
                icon: "üí®", 
                color: "from-blue-500 to-cyan-500",
                levels: {
                    "2.1": "Nitr√≥geno (78%)",
                    "2.2": "Ox√≠geno (21%)",
                    "2.3": "Otros gases",
                    "2.4": "Aire y part√≠culas"
                }
            },
            3: { 
                title: "CAPAS DE LA ATM√ìSFERA", 
                icon: "üåç", 
                color: "from-purple-500 to-pink-500",
                levels: {
                    "3.1": "Troposfera",
                    "3.2": "Estratosfera",
                    "3.3": "Mesosfera",
                    "3.4": "Termosfera y Exosfera"
                }
            },
            4: { 
                title: "FUNCIONES DE LA ATM√ìSFERA", 
                icon: "üõ°Ô∏è", 
                color: "from-green-500 to-emerald-500",
                levels: {
                    "4.1": "Efecto invernadero",
                    "4.2": "Capa de ozono",
                    "4.3": "Protecci√≥n meteoritos",
                    "4.4": "Fen√≥menos meteorol√≥gicos"
                }
            }
        };

        const content = {
            "1-1.1": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">üåã Primera Etapa: Atm√≥sfera Primitiva</h3>
                    <p class="mb-4">Hace unos <strong>4.600 millones de a√±os</strong>, cuando se form√≥ la Tierra, no exist√≠a atm√≥sfera como la conocemos hoy.</p>
                    <div class="bg-orange-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Caracter√≠sticas de la atm√≥sfera primitiva:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Formada principalmente por <strong>gases volc√°nicos</strong></li>
                            <li>Conten√≠a: vapor de agua (H‚ÇÇO), di√≥xido de carbono (CO‚ÇÇ), metano (CH‚ÇÑ), amon√≠aco (NH‚ÇÉ)</li>
                            <li><strong>NO hab√≠a ox√≠geno libre (O‚ÇÇ)</strong></li>
                            <li>Era t√≥xica para la vida actual</li>
                            <li>Temperatura muy elevada</li>
                        </ul>
                    </div>
                    <p class="text-sm text-gray-600">Los volcanes expulsaban gases continuamente, creando una atm√≥sfera densa y caliente.</p>
                `,
                questions: [
                    { q: "¬øHace cu√°ntos millones de a√±os se form√≥ la Tierra?", a: "4600", sol: "La Tierra se form√≥ hace 4.600 millones de a√±os" },
                    { q: "¬øQu√© tipo de gases formaban la atm√≥sfera primitiva?", a: "volcanicos", sol: "Gases volc√°nicos como vapor de agua, CO‚ÇÇ, metano y amon√≠aco" },
                    { q: "¬øHab√≠a ox√≠geno libre en la atm√≥sfera primitiva? (s√≠/no)", a: "no", sol: "NO hab√≠a ox√≠geno libre en la atm√≥sfera primitiva" }
                ]
            },
            "1-1.2": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">üåä Segunda Etapa: Formaci√≥n de Oc√©anos</h3>
                    <p class="mb-4">Hace unos <strong>3.800 millones de a√±os</strong>, la Tierra comenz√≥ a enfriarse.</p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">¬øQu√© ocurri√≥?</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>El <strong>vapor de agua</strong> de la atm√≥sfera se enfri√≥</li>
                            <li>Se produjeron <strong>lluvias torrenciales</strong> durante millones de a√±os</li>
                            <li>El agua se acumul√≥ en las depresiones formando los <strong>primeros oc√©anos</strong></li>
                            <li>Gran parte del CO‚ÇÇ se disolvi√≥ en el agua</li>
                            <li>La temperatura baj√≥ considerablemente</li>
                        </ul>
                    </div>
                    <p class="bg-yellow-50 p-3 rounded border-l-4 border-yellow-400">
                        üí° <strong>Importante:</strong> Los oc√©anos fueron clave para que apareciera la vida.
                    </p>
                `,
                questions: [
                    { q: "¬øHace cu√°ntos millones de a√±os se formaron los oc√©anos?", a: "3800", sol: "Los oc√©anos se formaron hace 3.800 millones de a√±os" },
                    { q: "¬øQu√© gas de la atm√≥sfera se convirti√≥ en agua al enfriarse?", a: "vapor de agua", sol: "El vapor de agua se condens√≥ y cay√≥ como lluvia" },
                    { q: "¬øD√≥nde se disolvi√≥ gran parte del CO‚ÇÇ?", a: "agua", sol: "El CO‚ÇÇ se disolvi√≥ en el agua de los oc√©anos" }
                ]
            },
            "1-1.3": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">ü¶† Tercera Etapa: Aparici√≥n del Ox√≠geno</h3>
                    <p class="mb-4">Hace unos <strong>2.500 millones de a√±os</strong> aparecieron las primeras formas de vida.</p>
                    <div class="bg-green-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Las cianobacterias: primeros productores de ox√≠geno</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Aparecieron las <strong>cianobacterias</strong> (bacterias fotosint√©ticas)</li>
                            <li>Realizaban la <strong>fotos√≠ntesis</strong>: CO‚ÇÇ + H‚ÇÇO ‚Üí O‚ÇÇ + glucosa</li>
                            <li>Comenzaron a liberar <strong>ox√≠geno (O‚ÇÇ)</strong> a la atm√≥sfera</li>
                            <li>El ox√≠geno era t√≥xico para muchos organismos de la √©poca</li>
                            <li>Lentamente el O‚ÇÇ se fue acumulando</li>
                        </ul>
                    </div>
                    <p class="bg-red-50 p-3 rounded border-l-4 border-red-400">
                        ‚ö†Ô∏è ¬°Curiosidad! El ox√≠geno inicialmente fue un "contaminante" mortal para los organismos anaerobios.
                    </p>
                `,
                questions: [
                    { q: "¬øQu√© organismos produjeron el primer ox√≠geno?", a: "cianobacterias", sol: "Las cianobacterias fueron las primeras en producir ox√≠geno" },
                    { q: "¬øQu√© proceso realizaban las cianobacterias?", a: "fotosintesis", sol: "Realizaban la fotos√≠ntesis" },
                    { q: "¬øHace cu√°ntos millones de a√±os aparecieron?", a: "2500", sol: "Aparecieron hace 2.500 millones de a√±os" }
                ]
            },
            "1-1.4": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">üå§Ô∏è Cuarta Etapa: Atm√≥sfera Actual</h3>
                    <p class="mb-4">Hace unos <strong>500 millones de a√±os</strong> la atm√≥sfera alcanz√≥ su composici√≥n actual.</p>
                    <div class="bg-sky-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Composici√≥n actual de la atm√≥sfera:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>78% Nitr√≥geno (N‚ÇÇ)</strong> - gas inerte</li>
                            <li><strong>21% Ox√≠geno (O‚ÇÇ)</strong> - esencial para la respiraci√≥n</li>
                            <li><strong>1% Otros gases</strong>: Arg√≥n (0,93%), CO‚ÇÇ (0,04%), vapor de agua, etc.</li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-bold mb-2">La capa de ozono (O‚ÇÉ):</h4>
                        <p>Se form√≥ en la <strong>estratosfera</strong> gracias al ox√≠geno. Protege la vida de la radiaci√≥n ultravioleta del Sol.</p>
                    </div>
                `,
                questions: [
                    { q: "¬øQu√© porcentaje de nitr√≥geno tiene la atm√≥sfera actual?", a: "78", sol: "La atm√≥sfera tiene 78% de nitr√≥geno" },
                    { q: "¬øQu√© porcentaje de ox√≠geno tiene?", a: "21", sol: "La atm√≥sfera tiene 21% de ox√≠geno" },
                    { q: "¬øEn qu√© capa se form√≥ el ozono?", a: "estratosfera", sol: "El ozono se form√≥ en la estratosfera" }
                ]
            },
            "2-2.1": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">üí® Nitr√≥geno (N‚ÇÇ) - 78%</h3>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Caracter√≠sticas del nitr√≥geno:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Es el <strong>gas m√°s abundante</strong> de la atm√≥sfera (78%)</li>
                            <li>Es un gas <strong>inerte</strong> (poco reactivo)</li>
                            <li>No se puede respirar directamente</li>
                            <li>Es esencial para formar <strong>prote√≠nas</strong></li>
                            <li>Las plantas lo absorben del suelo (nitratos)</li>
                            <li>Algunas bacterias pueden "fijar" el N‚ÇÇ del aire</li>
                        </ul>
                    </div>
                    <p class="bg-green-50 p-3 rounded border-l-4 border-green-400">
                        üå± Las leguminosas (lentejas, garbanzos) tienen bacterias en sus ra√≠ces que fijan el nitr√≥geno.
                    </p>
                `,
                questions: [
                    { q: "¬øQu√© porcentaje de nitr√≥geno hay en el aire?", a: "78", sol: "El nitr√≥geno representa el 78% del aire" },
                    { q: "¬øEl nitr√≥geno es reactivo o inerte?", a: "inerte", sol: "El nitr√≥geno es un gas inerte (poco reactivo)" },
                    { q: "¬øPara qu√© es esencial el nitr√≥geno en los seres vivos?", a: "proteinas", sol: "Es esencial para formar prote√≠nas" }
                ]
            },
            "2-2.2": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">ü´Å Ox√≠geno (O‚ÇÇ) - 21%</h3>
                    <div class="bg-red-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Caracter√≠sticas del ox√≠geno:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Representa el <strong>21%</strong> del aire</li>
                            <li>Es esencial para la <strong>respiraci√≥n</strong></li>
                            <li>Es muy <strong>reactivo</strong> (comburente)</li>
                            <li>Permite la <strong>combusti√≥n</strong></li>
                            <li>Las plantas lo producen en la fotos√≠ntesis</li>
                            <li>Los seres vivos lo consumen en la respiraci√≥n</li>
                        </ul>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold mb-2">üî• Combusti√≥n:</h4>
                        <p>El ox√≠geno es necesario para que algo arda. Sin ox√≠geno, el fuego se apaga.</p>
                    </div>
                `,
                questions: [
                    { q: "¬øQu√© porcentaje de ox√≠geno hay en el aire?", a: "21", sol: "El ox√≠geno representa el 21% del aire" },
                    { q: "¬øPara qu√© proceso vital es esencial el ox√≠geno?", a: "respiracion", sol: "Es esencial para la respiraci√≥n" },
                    { q: "¬øQu√© proceso produce ox√≠geno?", a: "fotosintesis", sol: "La fotos√≠ntesis produce ox√≠geno" }
                ]
            },
            "3-3.1": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">‚òÅÔ∏è Troposfera (0-12 km)</h3>
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Caracter√≠sticas:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Es la capa <strong>m√°s baja</strong> de la atm√≥sfera</li>
                            <li>Altura: desde el suelo hasta <strong>12 km</strong></li>
                            <li>Contiene el <strong>80% del aire</strong></li>
                            <li>Aqu√≠ ocurren los <strong>fen√≥menos meteorol√≥gicos</strong>: lluvia, nubes, viento</li>
                            <li>La temperatura <strong>disminuye</strong> con la altura (6,5¬∞C cada km)</li>
                            <li>Es donde <strong>vivimos</strong> y respiramos</li>
                        </ul>
                    </div>
                    <p class="bg-yellow-50 p-3 rounded">
                        ‚úàÔ∏è Los aviones comerciales vuelan en el l√≠mite superior de la troposfera.
                    </p>
                `,
                questions: [
                    { q: "¬øHasta qu√© altura llega la troposfera (en km)?", a: "12", sol: "La troposfera llega hasta 12 km de altura" },
                    { q: "¬øQu√© fen√≥menos ocurren en la troposfera?", a: "meteorologicos", sol: "Los fen√≥menos meteorol√≥gicos ocurren en la troposfera" },
                    { q: "¬øLa temperatura sube o baja con la altura?", a: "baja", sol: "La temperatura baja con la altura" }
                ]
            },
            "3-3.2": {
                theory: `
                    <h3 class="text-2xl font-bold mb-4">üõ°Ô∏è Estratosfera (12-50 km)</h3>
                    <div class="bg-sky-50 p-4 rounded-lg mb-4">
                        <h4 class="font-bold mb-2">Caracter√≠sticas:</h4>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Va desde los <strong>12 km hasta los 50 km</strong></li>
                            <li>Contiene la <strong>capa de ozono (O‚ÇÉ)</strong></li>
                            <li>El ozono absorbe la radiaci√≥n ultravioleta del Sol</li>
                            <li>La temperatura <strong>aumenta</strong> con la altura</li>
                            <li>Casi no hay nubes ni fen√≥menos meteorol√≥gicos</li>
                            <li>Es muy seca y estable</li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-bold mb-2">üåü Capa de ozono:</h4>
                        <p>Est√° entre los 20-30 km. Protege la vida en la Tierra filtrando los rayos UV peligrosos del Sol.</p>
                    </div>
                `,
                questions: [
                    { q: "¬øEntre qu√© alturas est√° la estratosfera? (12-...)", a: "50", sol: "La estratosfera va de 12 a 50 km" },
                    { q: "¬øQu√© capa protectora contiene?", a: "ozono", sol: "Contiene la capa de ozono" },
                    { q: "¬øLa temperatura sube o baja con la altura?", a: "sube", sol: "La temperatura sube con la altura" }
                ]
            }
        };

        function saveProgress() {
            localStorage.setItem('atmosfera-progress', JSON.stringify(state.completedLevels));
            localStorage.setItem('atmosfera-student-name', state.studentName);
        }

        function selectBlock(blockId) {
            state.selectedBlock = blockId;
            state.currentView = 'levels';
            render();
        }

        function selectLevel(levelId) {
            state.selectedLevel = levelId;
            state.currentView = 'content';
            render();
        }

        function backToBlocks() {
            state.currentView = 'blocks';
            state.selectedBlock = null;
            state.selectedLevel = null;
            render();
        }

        function backToLevels() {
            state.currentView = 'levels';
            state.selectedLevel = null;
            render();
        }

        function checkAnswer(questionIndex) {
            const key = `${state.selectedBlock}-${state.selectedLevel}`;
            const levelContent = content[key];
            const question = levelContent.questions[questionIndex];
            const input = document.getElementById(`answer-${questionIndex}`);
            const userAnswer = input.value.trim().toLowerCase().replace(/\s/g, '');
            const correctAnswer = question.a.toLowerCase().replace(/\s/g, '');
            const resultDiv = document.getElementById(`result-${questionIndex}`);
            
            if (userAnswer === correctAnswer) {
                resultDiv.innerHTML = `
                    <div class="bg-green-50 border-2 border-green-300 rounded-lg p-4 mt-2">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl">‚úÖ</span>
                            <span class="font-bold text-green-800">¬°Correcto!</span>
                        </div>
                        <p class="text-gray-700">${question.sol}</p>
                    </div>
                `;
                
                // Marcar pregunta como completada
                if (!state.completedLevels[key]) {
                    state.completedLevels[key] = [];
                }
                if (!state.completedLevels[key].includes(questionIndex)) {
                    state.completedLevels[key].push(questionIndex);
                    saveProgress();
                }
            } else {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 border-2 border-red-300 rounded-lg p-4 mt-2">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-2xl">‚ùå</span>
                            <span class="font-bold text-red-800">Incorrecto</span>
                        </div>
                        <p class="text-gray-700">Int√©ntalo de nuevo</p>
                    </div>
                `;
            }
        }

        function render() {
            const app = document.getElementById('app');
            
            if (state.currentView === 'blocks') {
                app.innerHTML = `
                    <div class="max-w-7xl mx-auto p-6">
                        <!-- Header -->
                        <div class="bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl shadow-2xl p-8 mb-8 text-white">
                            <h1 class="text-4xl font-bold mb-2">üåç La Atm√≥sfera</h1>
                            <p class="text-xl text-blue-100">1¬∫ ESO - Biolog√≠a y Geolog√≠a</p>
                        </div>
                        
                        <!-- Bloques -->
                        <h2 class="text-2xl font-bold text-gray-800 mb-6">üìö Selecciona un Bloque</h2>
                        <div class="grid md:grid-cols-2 gap-6">
                            ${Object.entries(blocks).map(([id, block]) => `
                                <div onclick="selectBlock('${id}')" 
                                     class="bg-gradient-to-br ${block.color} rounded-xl shadow-lg p-6 cursor-pointer transform transition hover:scale-105 text-white">
                                    <div class="text-5xl mb-4">${block.icon}</div>
                                    <h3 class="text-2xl font-bold mb-2">BLOQUE ${id}</h3>
                                    <p class="text-lg">${block.title}</p>
                                    <div class="mt-4 text-sm opacity-90">
                                        ${Object.keys(block.levels).length} niveles disponibles
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (state.currentView === 'levels') {
                const block = blocks[state.selectedBlock];
                app.innerHTML = `
                    <div class="max-w-7xl mx-auto p-6">
                        <button onclick="backToBlocks()" 
                                class="mb-6 px-6 py-3 bg-white rounded-xl shadow hover:bg-gray-50 transition">
                            ‚Üê Volver a Bloques
                        </button>
                        
                        <div class="bg-gradient-to-r ${block.color} rounded-2xl shadow-xl p-8 mb-8 text-white">
                            <div class="flex items-center gap-4">
                                <div class="text-6xl">${block.icon}</div>
                                <div>
                                    <h2 class="text-3xl font-bold">${block.title}</h2>
                                    <p class="text-lg opacity-90 mt-2">Selecciona un nivel para estudiar</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            ${Object.entries(block.levels).map(([levelId, levelName]) => {
                                const key = `${state.selectedBlock}-${levelId}`;
                                const isCompleted = state.completedLevels[key]?.length > 0;
                                return `
                                    <div onclick="selectLevel('${levelId}')" 
                                         class="bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-2xl transition">
                                        <div class="flex items-center justify-between mb-3">
                                            <span class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-bold">
                                                Nivel ${levelId}
                                            </span>
                                            ${isCompleted ? '<span class="text-green-600 text-2xl">‚úì</span>' : ''}
                                        </div>
                                        <h3 class="text-xl font-bold text-gray-800">${levelName}</h3>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            } else if (state.currentView === 'content') {
                const key = `${state.selectedBlock}-${state.selectedLevel}`;
                const levelContent = content[key];
                const block = blocks[state.selectedBlock];
                const levelName = block.levels[state.selectedLevel];
                
                if (!levelContent) {
                    app.innerHTML = `
                        <div class="max-w-4xl mx-auto p-6">
                            <button onclick="backToLevels()" class="mb-6 px-6 py-3 bg-white rounded-xl shadow">
                                ‚Üê Volver a Niveles
                            </button>
                            <div class="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-8 text-center">
                                <p class="text-xl">‚ö†Ô∏è Contenido en desarrollo</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                app.innerHTML = `
                    <div class="max-w-4xl mx-auto p-6">
                        <button onclick="backToLevels()" 
                                class="mb-6 px-6 py-3 bg-white rounded-xl shadow hover:bg-gray-50 transition">
                            ‚Üê Volver a Niveles
                        </button>
                        
                        <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
                            <div class="text-sm text-gray-500 mb-2">Bloque ${state.selectedBlock} - Nivel ${state.selectedLevel}</div>
                            <h2 class="text-3xl font-bold text-gray-800 mb-6">${levelName}</h2>
                            
                            <!-- Teor√≠a -->
                            <div class="prose max-w-none mb-8">
                                ${levelContent.theory}
                            </div>
                            
                            <hr class="my-8">
                            
                            <!-- Ejercicios -->
                            <h3 class="text-2xl font-bold text-indigo-900 mb-6">üìù Comprueba lo que has aprendido</h3>
                            <div class="space-y-6">
                                ${levelContent.questions.map((q, idx) => `
                                    <div class="bg-gray-50 rounded-xl p-6">
                                        <div class="font-bold text-lg mb-4">Pregunta ${idx + 1}: ${q.q}</div>
                                        <div class="flex gap-2">
                                            <input type="text" 
                                                   id="answer-${idx}" 
                                                   placeholder="Tu respuesta" 
                                                   class="flex-1 px-4 py-3 border-2 rounded-lg focus:border-blue-500 outline-none">
                                            <button onclick="checkAnswer(${idx})" 
                                                    class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                                Comprobar
                                            </button>
                                        </div>
                                        <div id="result-${idx}"></div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Inicializar
        render();
    </script>
</body>
</html>